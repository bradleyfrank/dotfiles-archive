#!/bin/bash

if [[ "$1" == "" ]] || [[ "$1" == "-h" ]] || [[ "$1" == "--help" ]]; then
  echo "Usage: set-hostname [hostname]"
  exit 1
fi

sudo scutil --set HostName "$1.local"
sudo scutil --set LocalHostName "$1"
sudo scutil --set ComputerName "$1"

sudo dscacheutil -flushcache
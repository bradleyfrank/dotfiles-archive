# update Anaconda
coil() {
  . /usr/local/anaconda3/bin/activate
  conda update -n base conda -y
  conda update --prefix /usr/local/anaconda3 anaconda -y 
  conda clean --all -y
  conda deactivate
}


# quick and dirty docker-compose linter
clint() {
  docker-compose -f "$1" config --quiet
}


# decrypt a file using openssl
decrypt() {
  openssl enc -d -aes-256-cbc -in "$1" -out "$1.decrypted"
}


# encrypt a file using openssl
encrypt() {
  openssl enc -aes-256-cbc -salt -in "$1" -out "$1.encrypted"
}


# detach gedit from the terminal session and supress output
gedit() {
  nohup /usr/bin/gedit "$@" >/dev/null 2>&1
}


# show website http headers; follow redirects
httptrace() {
  curl -s -L -D - "$1" -o /dev/null -w "%{url_effective}\n"
}


# update Dotfiles repo and restows all packages
mydots() {
  pushd "$HOME"/.dotfiles >/dev/null 2>&1 || return 1
  git stash
  git pull
  generate-dotfiles
  git submodule update --init --recursive
  for dir in */; do stow --restow "${dir%/}"; done
  popd >/dev/null 2>&1 || return 1
}


# update user Python packages
pup() {
  pip_upgrade_outdated -3 --user --verbose
}


# update RVM and Ruby gems
shine() {
  rvm get stable
  rvm gemset update
  rvm cleanup all
}


# update HomeBrew packages and casks
steep() {
  brew update
  brew upgrade
  brew cask upgrade
  brew cleanup
}


# tar and gzip a given directory
tardir() {
  tar -czf "${1%/}".tar.gz "$1"
}


# download YouTube video as music only
youtube-dl-music {
  if [[ "$(uname -s)" == "Darwin" ]]; then
    youtube-dl -x --audio-format m4a --postprocessor-args "-strict experimental" "$1"
  else
    youtube-dl -x --audio-format m4a "$1"
  fi
}